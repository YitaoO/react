import Taro, { Component } from "@tarojs/taro";
import { connect } from "@tarojs/redux";
import { View, Text } from "@tarojs/components";
import Arrow from "../../images/navigator_arrow_icon.png";
import "./index.scss";

@connect(({ car, carTree, search }) => ({
  search,
  car,
  carTree
}))
export default class Search extends Component {
  constructor(props) {
    super(props);
    this.handleCarChoice = this.handleCarChoice.bind(this);
  }
  // 选择车辆
  handleCarChoice = () => {
    // 清空
    this.props.dispatch({
      type: "carTree/saveState",
      response: {
        isMultiSelect: true,
        choiceCar: null,
        choiceFatherId: [],
        choiceChildId: [],
        showList: []
      }
    });
    Taro.navigateTo({ url: "/pages/choiceCar/index" });
  };
  render() {
    //   const {}
    const { isCar, isTime, isDate } = this.props.search;

    return (
      <View className="search-container">
        <View className="item">
          <View className="left">
            <View className="title">已选车辆</View>
            <View className="value">
              {!!choiceCar.carNumber ? choiceCar.carNumber : "所有车辆"}
            </View>
          </View>

          <View className="right" onClick={this.handleCarChoice}>
            <Text className="title">选择车辆</Text>
            <Image className="image" src={Arrow} />
          </View>
        </View>

        <View className="item">
          <View className="left">
            <View className="title">台班规则</View>
            <View className="value">8小时/班</View>
          </View>

          <View className="right" onClick={this.handleCarChoice}>
            <Text className="title">选择规则</Text>
            <Image className="image" src={Arrow} />
          </View>
        </View>

        <View className="item">
          <View className="left">
            <View className="title">日期范围</View>
            <View className="value">2018年9月12日</View>
          </View>

          <View className="right" onClick={this.handleCarChoice}>
            <Text className="title">选择日期</Text>
            <Image className="image" src={Arrow} />
          </View>
        </View>

        <View className="btn-search">查询</View>
      </View>
    );
  }
}
